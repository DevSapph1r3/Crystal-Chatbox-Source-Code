<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Crystal Chatbox Dashboard</title>
<link rel="stylesheet" href="/static/style.css">
<script>
window.CONFIG = {
    refresh_interval: {{ dashboard_update_interval | default(1) }},
    customs_text: `{{ customs_text | escape | replace('\n', '\\n') }}`
};
</script>
</head>
<body class="{% if theme == 'light' %}light{% endif %} {% if compact_mode %}compact{% endif %}">
<div class="container">
    <div class="header">
        <img src="/static/logo.png" alt="Crystal Logo" class="logo" />
        <div class="h1">Crystal Chatbox Dashboard</div>
    </div>

    <div class="tabs">
        <div id="dashboard_tab" class="tab active">Dashboard</div>
        <div id="settings_tab" class="tab">Settings</div>
        <div id="advanced_tab" class="tab">Advanced</div>
    </div>

    <!-- ==================== DASHBOARD TAB ==================== -->
    <div id="dashboard_content" class="tabcontent" style="display:block;">
        {% if not patreon_supporter %}
        <div style="text-align:center;margin:12px 0;padding:8px;background:var(--card-bg);border-radius:4px;">
            <div id="a-ads-728x90" style="margin:0 auto;max-width:728px;">
                <script async src="https://ad.a-ads.com/2126442.js" type="text/javascript"></script>
            </div>
        </div>
        {% endif %}
        
        <div class="card">
            <form id="manual_msg_form" action="/send" method="post">
                <label>Type message to send immediately:</label>
                <input type="text" name="message" placeholder="Type message..." required />
                <div style="margin-top:8px;"><button type="submit" class="btn-on">Send</button></div>
            </form>

            <div class="row" style="margin-top:12px;">
                <div class="left card">
                    <div class="controls">
                        <button id="btn_chatbox" class="btn-off">Chatbox</button>
                        <button id="btn_time" class="btn-on">Time</button>
                        <button id="btn_custom" class="btn-on">Custom</button>
                        <button id="btn_music" class="btn-on">Music</button>
                        <button id="btn_window" class="btn-off">Active Window</button>
                        <button id="btn_heartrate" class="btn-off">Heart Rate</button>
                        <button id="btn_weather" class="btn-off">Weather</button>
                        <button id="btn_music_progress" class="btn-on">Music Progress</button>

                        <label style="display:block;margin-top:6px;">Progress Style:</label>
                        <select id="select_progress_style">
                            <option value="bar" {% if progress_style == 'bar' %}selected{% endif %}>Bar</option>
                            <option value="dots" {% if progress_style == 'dots' %}selected{% endif %}>Dots</option>
                            <option value="percentage" {% if progress_style == 'percentage' %}selected{% endif %}>Percentage</option>
                        </select>

                        <hr />
                        <label>Layout (drag to reorder):</label>
                        <ul id="layout_list">
                            {% set all_items = {
                                "time": "Time",
                                "custom": "Custom Message",
                                "song": "Song",
                                "window": "Active Window",
                                "heartrate": "Heart Rate",
                                "weather": "Weather"
                            } %}

                            {# Render items in the order of layout_order first #}
                            {% for key in layout_order %}
                                {% if all_items[key] is defined %}
                                    <li class="layout-item" draggable="true" data-key="{{ key }}">{{ all_items[key] }}</li>
                                {% endif %}
                            {% endfor %}

                            {# Render any items missing from layout_order at the end #}
                            {% for key, label in all_items.items() %}
                                {% if key not in layout_order %}
                                    <li class="layout-item" draggable="true" data-key="{{ key }}">{{ label }}</li>
                                {% endif %}
                            {% endfor %}
                        </ul>

                    </div>
                </div>

                <div class="right card">
                    {% if not patreon_supporter %}
                    <div style="text-align:center;margin:0 0 16px 0;padding:8px;">
                        <div id="a-ads-300x250" style="margin:0 auto;max-width:300px;">
                            <script async src="https://ad.a-ads.com/2126443.js" type="text/javascript"></script>
                        </div>
                    </div>
                    {% endif %}
                    <div class="status-line"><strong>Chatbox:</strong> <pre id="chatbox_status" class="multiline">?</pre></div>
                    <div class="status-line"><strong>Time:</strong> <pre id="time_status" class="multiline">?</pre></div>
                    <div class="status-line"><strong>Custom Message:</strong> <pre id="custom_status" class="multiline">?</pre></div>
                    <div class="status-line"><strong>Current Song:</strong> <pre id="song_status" class="multiline">?</pre></div>
                    <div class="status-line"><strong>Active Window:</strong> <pre id="window_status" class="multiline">?</pre></div>
                    <div class="status-line"><strong>Heart Rate:</strong> <pre id="heartrate_status" class="multiline">?</pre></div>
                    <div class="status-line"><strong>Weather:</strong> <pre id="weather_status" class="multiline">?</pre></div>
                    <div class="status-line"><strong>Last Sent:</strong> <pre id="last_msg" class="multiline">---</pre></div>

                    <div class="preview fixed-preview" id="preview">Preview will show here.</div>
                    <img id="album_art" class="album" src="" alt="" />
                    
                    <div style="margin-top:10px;">
                        <strong>Next Messages:</strong>
                        <div id="message_queue" style="margin-top:4px;"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ==================== SETTINGS TAB ==================== -->
    <div id="settings_content" class="tabcontent" style="display:none;">
        <div class="card">
            <form action="/save_settings" method="post">
                
                <!-- VRChat Connection Settings -->
                <h3 class="section-header">VRChat Connection</h3>
                <div class="section-content">
                    <label>Quest or Desktop IP:</label>
                    <input type="text" name="quest_ip" value="{{ quest_ip }}" required />
                    <label>Quest Port:</label>
                    <input type="number" name="quest_port" value="{{ quest_port }}" required />
                    <label>OSC Send Interval (seconds):</label>
                    <input type="number" name="osc_send_interval" value="{{ osc_send_interval }}" required />
                    <label>Dashboard Update Interval (seconds):</label>
                    <input type="number" name="dashboard_update_interval" value="{{ dashboard_update_interval }}" required />
                    <label>Timezone:</label>
                    <select name="timezone">
                        <option value="local" {% if timezone == 'local' %}selected{% endif %}>Local</option>
                        {% for tz in timezones %}
                        <option value="{{ tz }}" {% if timezone==tz %}selected{% endif %}>{{ tz }}</option>
                        {% endfor %}
                    </select>
                </div>

                <hr />
                
                <!-- Spotify Integration -->
                <h3 class="section-header">Spotify Integration</h3>
                <div class="section-content">
                    <div class="info-box">
                        <strong>Setup Instructions:</strong>
                        <ol style="margin:8px 0;padding-left:20px;">
                            <li>Go to <a href="https://developer.spotify.com/dashboard" target="_blank" style="color:#00bfff;">Spotify Developer Dashboard</a></li>
                            <li>Create a new app (or use an existing one)</li>
                            <li>Copy the <strong>Client ID</strong> and <strong>Client Secret</strong> below</li>
                            <li>Add this <strong>Redirect URI</strong> to your Spotify app settings:</li>
                        </ol>
                        <div class="code-box">
                            {{ spotify_redirect_uri }}
                        </div>
                        <div style="margin-top:8px;color:#999;font-size:12px;">
                            After saving credentials, click "Authorize Spotify" to connect your account.
                        </div>
                    </div>
                    
                    <label>Spotify Client ID:</label>
                    <input type="text" name="spotify_client_id" value="{{ spotify_client_id }}" placeholder="Enter your Spotify Client ID" />
                    <label>Spotify Client Secret:</label>
                    <input type="text" name="spotify_client_secret" value="{{ spotify_client_secret }}" placeholder="Enter your Spotify Client Secret" />

                    <div style="margin-top:12px;display:flex;gap:8px;flex-wrap:wrap;">
                        <button type="submit" class="btn-on">Save Settings</button>
                        <a href="/spotify-auth" style="text-decoration:none;">
                            <button type="button" class="btn-on" style="background:#1db954;">Authorize Spotify</button>
                        </a>
                    </div>
                </div>
            </form>

            <hr />
            
            <!-- Custom Messages -->
            <h3 class="section-header">Custom Messages</h3>
            <div class="section-content">
                <label>Custom Messages:</label>
                <div id="inline_messages_container" style="margin-top:8px;"></div>
                <button id="add_message_btn" class="btn-on" style="margin-top:8px;">Add New Message</button>
            </div>
        </div>
    </div>

    <!-- ==================== ADVANCED TAB ==================== -->
    <div id="advanced_content" class="tabcontent" style="display:none;">
        <div class="card">
            
            <!-- APPEARANCE -->
            <h3 class="section-header">Appearance</h3>
            <div class="section-content">
                <div style="display:flex;gap:8px;flex-wrap:wrap;">
                    <button id="toggle_theme_btn" class="btn-{% if theme == 'light' %}on{% else %}off{% endif %}">Theme: {% if theme == 'light' %}Light{% else %}Dark{% endif %}</button>
                    <button id="toggle_streamer_btn" class="btn-{% if streamer_mode %}on{% else %}off{% endif %}">Streamer Mode: {% if streamer_mode %}ON{% else %}OFF{% endif %}</button>
                    <button id="toggle_compact_btn" class="btn-{% if compact_mode %}on{% else %}off{% endif %}">Compact Mode: {% if compact_mode %}ON{% else %}OFF{% endif %}</button>
                    <button id="show_module_icons_btn" class="btn-{% if show_module_icons %}on{% else %}off{% endif %}">Module Icons: {% if show_module_icons %}ON{% else %}OFF{% endif %}</button>
                </div>
            </div>
            
            <hr />
            
            <!-- TEXT EFFECTS -->
            <h3 class="section-header">Text Effects</h3>
            <div class="section-content">
                <label>Apply visual effects to your messages:</label>
                <select id="text_effect_select" style="width:100%;padding:6px;margin-top:8px;background:var(--input-bg);color:var(--text-color);border:1px solid var(--border-color);border-radius:4px;">
                    <option value="none">None</option>
                    <option value="rainbow">üåà Rainbow</option>
                    <option value="sparkle">‚ú® Sparkle</option>
                    <option value="fire">üî• Fire</option>
                    <option value="ice">‚ùÑÔ∏è Ice</option>
                    <option value="heart">üíñ Hearts</option>
                    <option value="star">‚≠ê Stars</option>
                    <option value="neon">üí° Neon</option>
                    <option value="wave">„Ä∞Ô∏è Wave</option>
                    <option value="bounce">‚¨ÜÔ∏è Bounce</option>
                </select>
                <div style="margin-top:8px;padding:12px;background:#2a2a2a;border-radius:6px;min-height:40px;font-size:13px;color:#999;">
                    <strong>Preview:</strong> <span id="effect_preview_text">Select an effect to see preview</span>
                </div>
            </div>
            
            <hr />
            
            <!-- WEATHER -->
            <h3 class="section-header">Weather</h3>
            <div class="section-content">
                <label>Display current weather in your chatbox:</label>
                <div style="margin-top:8px;">
                    <label>Location (city name or "auto" for IP-based):</label>
                    <input type="text" id="weather_location" value="auto" placeholder="e.g., London, Tokyo, or auto" />
                    <button id="save_weather_location_btn" class="btn-on" style="margin-top:8px;">Save Weather Location</button>
                    <div style="margin-top:8px;color:#999;font-size:12px;">
                        Weather updates every 10 minutes using wttr.in service (no API key needed)
                    </div>
                </div>
            </div>
            
            <hr />
            
            <!-- AI MESSAGE GENERATOR -->
            <h3 class="section-header">AI Message Generator</h3>
            <div class="section-content">
                <div class="info-box">
                    <strong>Generate creative messages using AI:</strong>
                    <div style="margin-top:12px;">
                        <label>Mood/Style:</label>
                        <select id="ai_mood" style="width:100%;padding:6px;margin-top:4px;background:var(--input-bg);color:var(--text-color);border:1px solid var(--border-color);border-radius:4px;">
                            <option value="funny">Funny</option>
                            <option value="wholesome">Wholesome</option>
                            <option value="mysterious">Mysterious</option>
                            <option value="energetic">Energetic</option>
                            <option value="chill">Chill</option>
                            <option value="chaotic">Chaotic</option>
                            <option value="professional">Professional</option>
                            <option value="gamer">Gamer</option>
                        </select>
                    </div>
                    <div style="margin-top:12px;">
                        <label>Theme (optional):</label>
                        <input type="text" id="ai_theme" placeholder="e.g., cats, space, VRChat..." style="width:100%;padding:6px;margin-top:4px;" />
                    </div>
                    <div style="margin-top:12px;">
                        <button id="generate_ai_btn" class="btn-on">Generate AI Message</button>
                    </div>
                    <div id="ai_result" style="margin-top:12px;padding:12px;background:#0d0d0d;border-radius:4px;display:none;">
                        <div style="margin-bottom:8px;color:#0af;font-weight:bold;">Generated Message:</div>
                        <div id="ai_message_text" style="margin-bottom:12px;"></div>
                        <button id="add_ai_message_btn" class="btn-on">Add to Custom Messages</button>
                    </div>
                    <div style="margin-top:8px;color:#999;font-size:12px;">
                        Requires OPENAI_API_KEY environment variable to be set. Get your API key from <a href="https://platform.openai.com/api-keys" target="_blank" style="color:#00bfff;">OpenAI Platform</a>
                    </div>
                </div>
            </div>
            
            <hr />
            
            <!-- MESSAGE BEHAVIOR -->
            <h3 class="section-header">Message Behavior</h3>
            <div class="section-content">
                <div style="margin-bottom:12px;">
                    <button id="random_order_btn" class="btn-{% if random_order %}on{% else %}off{% endif %}">Random Order: {% if random_order %}ON{% else %}OFF{% endif %}</button>
                </div>
                
                <label>Per-Message Timing (seconds):</label>
                <div id="per_message_timing_container" style="margin-top:8px;"></div>
                
                <div id="message_weights_section" style="{% if not random_order %}display:none;{% endif %}margin-top:16px;">
                    <label>Message Weights (higher weight = appears more often):</label>
                    <div id="message_weights_container" style="margin-top:8px;"></div>
                </div>
            </div>
            
            <hr />
            
            <!-- PROFILES & PRESETS -->
            <h3 class="section-header">Profiles & Presets</h3>
            <div class="section-content">
                <label>Save and load different chatbox configurations:</label>
                <div style="margin-top:8px;">
                    <label>Profile:</label>
                    <select id="profile_select" style="width:100%;padding:6px;margin-top:4px;background:var(--input-bg);color:var(--text-color);border:1px solid var(--border-color);border-radius:4px;">
                        <option value="">-- Select a profile --</option>
                    </select>
                    <div style="display:flex;gap:8px;margin-top:12px;flex-wrap:wrap;">
                        <button id="save_profile_btn" class="btn-on">Save Current Profile</button>
                        <button id="load_profile_btn" class="btn-on">Load Profile</button>
                        <button id="delete_profile_btn" class="btn-off">Delete Profile</button>
                    </div>
                    <div style="margin-top:8px;color:#999;font-size:12px;">
                        Profiles save all display settings, custom messages, emojis, and layout preferences.
                    </div>
                </div>
            </div>
            
            <hr />
            
            <!-- INTEGRATIONS -->
            <h3 class="section-header">Integrations</h3>
            <div class="section-content">
                
                <!-- Window Tracking -->
                <div class="integration-subsection">
                    <h4 style="color:#00bfff;font-size:16px;margin:0 0 8px 0;">üíª Window Tracking</h4>
                    <label>Track your active application/browser tab:</label>
                    <div style="margin-top:8px;">
                        <button id="toggle_window_tracking_btn" class="btn-{% if window_tracking_enabled %}on{% else %}off{% endif %}">Window Tracking: {% if window_tracking_enabled %}ON{% else %}OFF{% endif %}</button>
                        <div style="margin-top:12px;">
                            <label>Tracking Mode:</label>
                            <select id="window_tracking_mode" style="width:100%;padding:6px;margin-top:4px;background:var(--input-bg);color:var(--text-color);border:1px solid var(--border-color);border-radius:4px;">
                                <option value="both" {% if window_tracking_mode == 'both' %}selected{% endif %}>Both (App + Browser Tabs)</option>
                                <option value="app" {% if window_tracking_mode == 'app' %}selected{% endif %}>App Only (No Browser Tabs)</option>
                                <option value="browser" {% if window_tracking_mode == 'browser' %}selected{% endif %}>Browser Tabs Only</option>
                            </select>
                        </div>
                        <div style="margin-top:8px;color:#999;font-size:12px;">
                            Note: Cross-platform support (Windows, macOS, Linux). Requires local installation.
                        </div>
                    </div>
                </div>
                
                <div style="height:16px;"></div>
                
                <!-- Heart Rate Monitor -->
                <div class="integration-subsection">
                    <h4 style="color:#00bfff;font-size:16px;margin:0 0 8px 0;">‚ù§Ô∏è Heart Rate Monitor</h4>
                    <label>Connect your heart rate monitor to display BPM:</label>
                    <div style="margin-top:8px;">
                        <button id="toggle_heart_rate_enabled_btn" class="btn-{% if heart_rate_enabled %}on{% else %}off{% endif %}">Heart Rate Tracking: {% if heart_rate_enabled %}ON{% else %}OFF{% endif %}</button>
                        <div style="margin-top:12px;">
                            <label>Heart Rate Source:</label>
                            <select id="heart_rate_source" style="width:100%;padding:6px;margin-top:4px;background:var(--input-bg);color:var(--text-color);border:1px solid var(--border-color);border-radius:4px;">
                                <option value="pulsoid" {% if heart_rate_source == 'pulsoid' %}selected{% endif %}>Pulsoid</option>
                                <option value="hyperate" {% if heart_rate_source == 'hyperate' %}selected{% endif %}>HypeRate.io</option>
                                <option value="custom" {% if heart_rate_source == 'custom' %}selected{% endif %}>Custom API</option>
                            </select>
                        </div>
                        <div id="pulsoid_settings" style="margin-top:12px;{% if heart_rate_source != 'pulsoid' %}display:none;{% endif %}">
                            <label>Pulsoid API Token:</label>
                            <input type="text" id="heart_rate_pulsoid_token" value="{{ heart_rate_pulsoid_token }}" placeholder="Enter your Pulsoid API token" />
                            <div style="margin-top:8px;color:#999;font-size:12px;">
                                Get your token from <a href="https://pulsoid.net/ui/keys" target="_blank" style="color:#00bfff;">Pulsoid Developer Page</a>
                            </div>
                        </div>
                        <div id="hyperate_settings" style="margin-top:12px;{% if heart_rate_source != 'hyperate' %}display:none;{% endif %}">
                            <label>HypeRate Session ID:</label>
                            <input type="text" id="heart_rate_hyperate_id" value="{{ heart_rate_hyperate_id }}" placeholder="Enter your HypeRate session ID" />
                            <div style="margin-top:8px;color:#999;font-size:12px;">
                                Get your session ID from <a href="https://www.hyperate.io/" target="_blank" style="color:#00bfff;">HypeRate.io</a>
                            </div>
                        </div>
                        <div id="custom_api_settings" style="margin-top:12px;{% if heart_rate_source != 'custom' %}display:none;{% endif %}">
                            <label>Custom API URL:</label>
                            <input type="text" id="heart_rate_custom_api" value="{{ heart_rate_custom_api }}" placeholder="https://your-api.com/heartrate" />
                            <div style="margin-top:8px;color:#999;font-size:12px;">
                                API should return JSON with "bpm", "heart_rate", or "hr" field
                            </div>
                        </div>
                        <div style="margin-top:12px;">
                            <label>Update Interval (seconds):</label>
                            <input type="number" id="heart_rate_update_interval" value="{{ heart_rate_update_interval }}" min="1" max="60" />
                        </div>
                        <button id="save_heart_rate_settings_btn" class="btn-on" style="margin-top:8px;">Save Heart Rate Settings</button>
                    </div>
                </div>
                
                <div style="height:16px;"></div>
                
                <!-- Discord Integration -->
                <div class="integration-subsection">
                    <h4 style="color:#00bfff;font-size:16px;margin:0 0 8px 0;">üí¨ Discord Integration</h4>
                    <label>Show Discord activity in chatbox:</label>
                    <div style="margin-top:8px;">
                        <button id="toggle_discord_btn" class="btn-off">Discord Integration: OFF</button>
                        <div class="warning-box">
                            ‚ö†Ô∏è <strong>Note:</strong> Discord Rich Presence only works on local installations where Discord desktop app is running. It will not work in cloud/Replit environments.
                        </div>
                    </div>
                </div>
            </div>
            
            <hr />
            
            <!-- VERSION & UPDATES -->
            <h3 class="section-header">Version & Updates</h3>
            <div class="section-content">
                <label>Check for new versions and updates:</label>
                <div class="info-box" style="margin-top:8px;">
                    <div style="margin-bottom:8px;"><strong>Current Version:</strong> <span id="current_version">Loading...</span></div>
                    <div id="update_info" style="display:none;padding:12px;background:#0d0d0d;border-radius:4px;margin-top:12px;">
                        <div style="margin-bottom:8px;color:#0f0;font-weight:bold;">üéâ Update Available!</div>
                        <div style="margin-bottom:8px;"><strong>Latest Version:</strong> <span id="latest_version"></span></div>
                        <div style="margin-bottom:8px;"><strong>Release:</strong> <span id="release_name"></span></div>
                        <div style="margin-bottom:12px;" id="release_notes"></div>
                        <a id="release_link" href="#" target="_blank" style="display:inline-block;padding:8px 16px;background:#0af;color:#fff;text-decoration:none;border-radius:4px;">View on GitHub</a>
                    </div>
                    <div id="no_update_info" style="display:none;color:#0f0;">‚úÖ You're up to date!</div>
                </div>
                <button id="check_updates_btn" class="btn-on" style="margin-top:8px;">Check for Updates</button>
            </div>
            
            <hr />
            
            <!-- EMOJI CUSTOMIZATION -->
            <h3 class="section-header">Emoji Customization</h3>
            <div class="section-content">
                <label>Customize the emojis for each module:</label>
                <div style="margin-top:8px;">
                    <label>Time Emoji:</label>
                    <input type="text" id="time_emoji" value="{{ time_emoji }}" maxlength="5" placeholder="‚è∞" />
                    <label>Song Emoji:</label>
                    <input type="text" id="song_emoji" value="{{ song_emoji }}" maxlength="5" placeholder="üé∂" />
                    <label>Window Emoji:</label>
                    <input type="text" id="window_emoji" value="{{ window_emoji }}" maxlength="5" placeholder="üíª" />
                    <label>Heart Rate Emoji:</label>
                    <input type="text" id="heartrate_emoji" value="{{ heartrate_emoji }}" maxlength="5" placeholder="‚ù§Ô∏è" />
                    <button id="save_emojis_btn" class="btn-on" style="margin-top:8px;">Save Emojis</button>
                </div>
            </div>
            
            <hr />
            
            <!-- SUPPORT THE DEVELOPER -->
            <h3 class="section-header">Support the Developer</h3>
            <div class="section-content">
                <div class="info-box">
                    <p style="margin-top:0;">If you enjoy using this dashboard, please consider supporting me on Patreon!</p>
                    <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:12px;">
                        <a href="https://patreon.com/Sapph1r3?utm_medium=unknown&utm_source=join_link&utm_campaign=creatorshare_creator&utm_content=copyLink" target="_blank" style="text-decoration:none;">
                            <button class="btn-on">Support on Patreon</button>
                        </a>
                        <a href="https://www.patreon.com/15093289/join" target="_blank" style="text-decoration:none;">
                            <button class="btn-on">Join Patreon</button>
                        </a>
                    </div>
                    <div style="margin-top:12px;">
                        <button id="toggle_patreon_btn" class="btn-{% if patreon_supporter %}on{% else %}off{% endif %}">Patreon Supporter: {% if patreon_supporter %}YES{% else %}NO{% endif %}</button>
                        <div style="margin-top:8px;color:#999;font-size:12px;">
                            Click to enter your unique supporter license key (provided on Patreon) to unlock premium customization features!
                            <br>Each Patreon supporter receives a personalized license key. Contact the developer if you need your key.
                        </div>
                    </div>
                </div>
            </div>
            
            <hr />
            
            <!-- PREMIUM CUSTOMIZATION -->
            <div id="premium_styling_section" style="{% if not patreon_supporter %}opacity:0.5;pointer-events:none;{% endif %}">
                <h3 class="section-header">Premium Customization {% if not patreon_supporter %}(Patreon Supporters Only){% endif %}</h3>
                <div class="section-content">
                    <label>Custom Background (URL or hex color):</label>
                    <input type="text" id="custom_background" value="{{ custom_background }}" placeholder="https://... or #1a1a1a" {% if not patreon_supporter %}disabled{% endif %} />
                    <label>Custom Button Color (hex color):</label>
                    <input type="text" id="custom_button_color" value="{{ custom_button_color }}" placeholder="#27ae60" {% if not patreon_supporter %}disabled{% endif %} />
                    <button id="save_premium_styling_btn" class="btn-on" style="margin-top:8px;" {% if not patreon_supporter %}disabled{% endif %}>Save Premium Styling</button>
                </div>
            </div>
            
            <hr />
            
            <!-- BACKUP & RESTORE -->
            <h3 class="section-header">Backup & Restore</h3>
            <div class="section-content">
                <div style="margin-bottom:12px;display:flex;gap:8px;flex-wrap:wrap;">
                    <button id="download_settings_btn" class="btn-on">Download Settings</button>
                    <button id="download_log_btn" class="btn-on">Download Error Log</button>
                    <button id="reset_defaults_btn" class="btn-off">Reset to Defaults</button>
                </div>
                <div style="margin-top:12px;">
                    <input type="file" id="upload_settings_file" accept=".json" style="display:none;" />
                    <button id="upload_settings_btn" class="btn-on">Upload Settings</button>
                    <div style="margin-top:8px;color:#999;font-size:12px;">
                        Upload a previously downloaded settings.json file to restore your configuration.
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<footer class="footer">
    <div class="footer-content">
        <div class="footer-made-by">Made by Sapph1r3</div>
        <div class="footer-links">
            <a href="https://vrchat.com/home/user/usr_d5b25d37-63ff-45b8-9a4a-9a0a1f6e05b0" target="_blank" class="footer-link">
                üéÆ VRChat: Sapph1r3
            </a>
            <a href="https://discord.com/users/Bxpq" target="_blank" class="footer-link">
                üí¨ Discord: Bxpq
            </a>
            <a href="https://discord.gg/3Qypg9vnEP" target="_blank" class="footer-link">
                üåê Community Server
            </a>
            <a href="https://patreon.com/Sapph1r3" target="_blank" class="footer-link">
                ‚ù§Ô∏è Support on Patreon
            </a>
        </div>
    </div>
</footer>

<script src="/static/script.js"></script>
</body>
</html>
